# Vidsync Production Environment Configuration
# Copy this file to .env and fill in production values

# ========== SERVER CONFIGURATION ==========
NODE_ENV=production
PORT=3000
HOST=0.0.0.0

# ========== SUPABASE CONFIGURATION ==========
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# ========== JWT CONFIGURATION ==========
JWT_SECRET=your-super-secret-jwt-key-min-32-chars
JWT_EXPIRY=24h

# ========== NEBULA CERTIFICATE AUTHORITY ==========
# Path to CA certificate and key files
NEBULA_CA_CERT=/etc/vidsync/certs/ca.crt
NEBULA_CA_KEY=/etc/vidsync/certs/ca.key

# Nebula network configuration
NEBULA_NETWORK_CIDR=192.168.100.0/24
NEBULA_LIGHTHOUSE_IPS=192.168.100.1

# ========== RATE LIMITING ==========
# Rate limit requests per minute per IP
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# API specific rate limits
RATE_LIMIT_AUTH=20
RATE_LIMIT_PAIRING=10
RATE_LIMIT_SYNC=50

# ========== AUDIT LOGGING ==========
# Enable audit logging of user actions
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_FILE=/var/log/vidsync/audit.log
AUDIT_LOG_RETENTION_DAYS=90

# ========== SECURITY ==========
# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://vidsync.example.com,https://app.vidsync.example.com

# Enable HTTPS/TLS
ENABLE_TLS=true
TLS_CERT_FILE=/etc/vidsync/certs/server.crt
TLS_KEY_FILE=/etc/vidsync/certs/server.key

# HSTS max-age in seconds (one year)
HSTS_MAX_AGE=31536000

# ========== LOGGING ==========
LOG_LEVEL=info
LOG_FILE=/var/log/vidsync/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=10

# ========== DATABASE ==========
DATABASE_URL=postgresql://user:password@localhost:5432/vidsync
DATABASE_POOL_SIZE=20
DATABASE_IDLE_TIMEOUT=30000

# ========== EXTERNAL SERVICES ==========
# Optional: Error tracking/monitoring
SENTRY_DSN=

# Optional: Metrics/APM
DATADOG_API_KEY=

# ========== BACKUP & RECOVERY ==========
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=/backups/vidsync

# ========== FEATURE FLAGS ==========
# Feature control for gradual rollout
FEATURE_DEVICE_PAIRING=true
FEATURE_AUDIT_LOG=true
FEATURE_ADVANCED_SYNC=true
